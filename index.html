<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Is it Hamiltonian?</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>
<body>
    <h1>Is it Hamiltonian?</h1>
    <p>
    Wanna know if a graph has a <a href="https://mathworld.wolfram.com/HamiltonianPath.html" target="_blank" rel="noopener">
    Hamiltonian path</a>?
    </p>
    <p>Enter an adjacency matrix (via comma-separated rows) or play around in the graph editor to create an undirected graph.</p>

    <h3>Adjaceny Matrix Input</h3>
    <textarea id="matrixInput">
1,0,0,0
0,1,0,0
0,0,1,0
0,0,0,1
        </textarea>
    <h3>Visual Editor</h3>
    <p>
        Click on a node to select it, then click on another to add an edge.
        <br>
        Click on a node or edge to select it, then hit the x near it to delete.
        <br>
        <small>Note: this only auto updates on complete <b>valid</b> inputs on above matrix, so if you need to add a new row other rows need to be updated</small>
    </p>
    <canvas id="graphCanvas" width="800" height="500"></canvas>
    <h3>Algorithm Selection</h3>
    <label for="algorithmSelect">Algorithm:</label>
    <select id="algorithmSelect">
        <option value="dfs">DFS</option>
        <option value="exponential">Exponential</option>
        <option value="greedy">Greedy (Approx)</option>
        <option value="custom">Custom (User Script)</option>
    </select>

    <button id="checkButton">Check</button>
    <p id="result"></p>
    <p id="timeTaken"></p>
    <div id="customAlgoSection" style="display: none;">
        <h3>Custom Algo To Run (js only atm)</h3>
        <p>You can write a function <code>customAlgo(matrix)</code> that returns <code>true</code> or <code>false</code>.</p>
        <textarea id="customAlgoInput">
function customAlgo(matrix) {
    // bad algo example - you have to use customAlgo definition above
    const n = matrix.length;
    const nodes = Array.from({ length: n }, (_, i) => i);

    function isHamiltonianPath(perm) {
        for (let i = 0; i < perm.length - 1; i++) {
            if (matrix[perm[i]][perm[i + 1]] !== 1) return false;
        }
        return true;
    }

    function* permutations(arr, l = 0) {
        if (l === arr.length - 1) {
            yield arr.slice();
        } else {
            for (let i = l; i < arr.length; i++) {
                [arr[l], arr[i]] = [arr[i], arr[l]];
                yield* permutations(arr, l + 1);
                [arr[l], arr[i]] = [arr[i], arr[l]];
            }
        }
    }

    for (const perm of permutations(nodes)) {
        if (isHamiltonianPath(perm)) return true;
    }

    return false;
}
        </textarea>
    </div>
    <script type="module" src="main.js"></script>
    <script type="module" src="utils/graph.js"></script>
</body>
</html>
